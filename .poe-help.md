# Poe Tasks - Train Ticket System

## Sử dụng Poe

Poe the Poet là task runner cho Python, nhưng có thể dùng cho bất kỳ project nào.

### Cài đặt Poe

Nếu chưa có:
```bash
pip install poethepoet
# hoặc
pipx install poethepoet
```

### Sử dụng

Xem tất cả tasks:
```bash
poe
# hoặc
poe --help
```

Chạy một task:
```bash
poe <task-name>
```

## Các Tasks Phổ Biến

### Docker Commands
```bash
poe up              # Build và chạy tất cả services
poe up-d            # Chạy ở background
poe down            # Dừng tất cả services
poe down-v          # Dừng và xóa volumes
poe logs            # Xem logs của tất cả services
poe logs-service apigateway  # Xem logs của một service
poe ps              # Xem status
poe restart apigateway       # Restart một service
```

### Build Commands
```bash
poe build-all       # Build tất cả services
poe build user-service  # Build một service
poe clean-all       # Clean tất cả services
```

### Run Locally
```bash
poe run-eureka      # Chạy Eureka Server
poe run-gateway     # Chạy API Gateway
poe run-user        # Chạy User Service
poe run-inventory   # Chạy Inventory Service
poe run-ticket      # Chạy Ticket Service
poe run-payment     # Chạy Payment Service
poe run-notification # Chạy Notification Service
```

### Database
```bash
poe db-connect      # Kết nối PostgreSQL
poe db-backup       # Backup database
poe db-restore backup.sql  # Restore database
```

### Redis
```bash
poe redis-cli       # Kết nối Redis CLI
poe redis-flush      # Xóa tất cả keys
```

### Utilities
```bash
poe health          # Kiểm tra health của tất cả services
poe eureka-ui       # Mở Eureka Dashboard
poe rabbitmq-ui     # Mở RabbitMQ Management
poe containers      # Xem containers đang chạy
```

### Development
```bash
poe infra           # Khởi động infrastructure
poe infra-eureka    # Khởi động infrastructure + Eureka
poe quick-start     # Quick start workflow
poe test user-service  # Chạy tests cho một service
poe test-all        # Chạy tests cho tất cả services
```

## Ví dụ

```bash
# Khởi động tất cả services
poe up-d

# Xem logs của API Gateway
poe logs-service apigateway

# Build lại một service
poe build user-service

# Kiểm tra health
poe health

# Chạy service locally (không dùng Docker)
poe infra-eureka
poe run-user
```

## Lưu ý

- Các tasks với parameters sử dụng `{argv}` để nhận arguments
- Một số tasks sử dụng shell scripts để xử lý logic phức tạp
- Poe tự động detect file `pyproject.toml` trong thư mục hiện tại

